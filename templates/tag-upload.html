{% extends 'base.html' %}
{% block content %}
<style>
   .form-box{
      margin:20rem
    }
</style>
<div class="page-contents form-box justify-content-center align-items-center mt-5">
  <form class=" " action="/saveTag" method="post" enctype="multipart/form-data">
    <div class="row g-3">
      <div class="col-md-12">
        <label for="design_code" class="form-label mb-1">Design Code</label>
        <input class="form-control form-control-sm" name="design_code" type="text" id="design_code">
      </div>
      <div class="col-md-12">
        <label for="product_code" class="form-label mb-1">Product Code</label>
        <input class="form-control form-control-sm" name="product_code" type="text" id="product_code">
      </div>
      <div class="col-md-12">
        <label for="front_side" class="form-label mb-1">Front Side</label>
        <input class="form-control form-control-sm" name="svgFile_frontside" type="file" accept=".svg" id="front_side">
      </div>

      <div class="col-md-12 back_side_img mt-3">
        <label for="back_side" class="form-label mb-1">Back Side</label>
        <input type="file" class="form-control form-control-sm" name="svgFile_backside" id="back_side" accept=".svg" />
      </div>
    </div>
    <div class="col-md-12 mt-3">
      <input class="form-check-input dynamic_label" type="checkbox" value="1" name="dynamic_label" id="dynamic_label">
      <label class="form-check-label" for="dynamic_label">
        Dynamic label
      </label>
    </div>
    <div class="col-md-12 mt-4">
      <center> <button type="submit" class="btn btn-sm btn-primary">Submit</button></center>
    </div>

</div>
</form>
</div>
</div>

<!-- Flash Messages for Success/Failure -->
{% with messages = get_flashed_messages() %}
{% if messages %}
<!-- Set the flash message as the modal content -->
<script>
  document.addEventListener('DOMContentLoaded', function () {
    var flashMessage = '{{ messages[0] }}';
    // Set the content of the modal dynamically
    document.getElementById('modalBody').innerText = flashMessage;

    // Trigger the modal to open
    var myModal = new bootstrap.Modal(document.getElementById('popupModal'));
    myModal.show();
  });
</script>
{% endif %}
{% endwith %}
</div>

<!-- Bootstrap Modal for Success Message -->
<div class="modal fade" id="popupModal" tabindex="-1" role="dialog" aria-labelledby="popupModalTitle"
  aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="popupModalTitle">Tag Upload Status</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body" id="modalBody">
        <!-- Flash message will be dynamically inserted here -->
      </div>
    </div>
  </div>
</div>
{% endblock %}